library(tidyverse)
library(tidyr)
library(plyr)
library(devtools)
install_github("CompARE-Composite/CompARE-package")
library(CompARE)
#########################################
# Define the set of scenarios
#########################################
# Scenarios
p0_e1 = c(0.1, 0.2)
p0_e2 = c(0.1, 0.2, 0.3)
OR1 = c(0.6, 0.7, 0.8, 0.9)
OR2 = c(0.65, 0.7, 0.8)
scenarios = expand_grid(p0_e1,p0_e2,OR1,OR2)
# Probabilities treat group
scenarios$p1_e1 = (scenarios$OR1*scenarios$p0_e1/(1-scenarios$p0_e1))/(1+(scenarios$OR1*scenarios$p0_e1/(1-scenarios$p0_e1)))
scenarios$p1_e2 = (scenarios$OR2*scenarios$p0_e2/(1-scenarios$p0_e2))/(1+(scenarios$OR2*scenarios$p0_e2/(1-scenarios$p0_e2)))
# Calculate the correlation bounds
scenarios$min_corr0 = mapply(lower_corr,scenarios$p0_e1,scenarios$p0_e2)
scenarios$min_corr1 = mapply(lower_corr,scenarios$p1_e1,scenarios$p1_e2)
scenarios$max_corr0 = mapply(upper_corr,scenarios$p0_e1,scenarios$p0_e2)
scenarios$max_corr1 = mapply(upper_corr,scenarios$p1_e1,scenarios$p1_e2)
scenarios$min_corr = pmax(scenarios$min_corr0,scenarios$min_corr1)
scenarios$max_corr = pmin(scenarios$max_corr0,scenarios$max_corr1)
scenarios1 = scenarios; scenarios2 = scenarios; scenarios3 = scenarios
scenarios3$corr = (scenarios3$max_corr)/3
scenarios2$corr = (scenarios2$max_corr)/2
scenarios1$corr = scenarios1$max_corr
scenarios$corr = 0
dataset = rbind(scenarios,scenarios1,scenarios2,scenarios3)
setwd("C:/Users/Marta/Dropbox/C5/Scripts/GitKraken/CBE_selection")
rep(2,0)
rep(2,2)
rep(0,2)
c(1,c(1,2))
load("C:/Users/Marta/Dropbox/C5/Scripts/GitKraken/CBE_selection/results/results.RData")
View(dataset)
load("C:/Users/Marta/Dropbox/C5/Scripts/GitKraken/CBE_selection/results.RData")
View(dataset)
load("C:/Users/Marta/Dropbox/C5/Scripts/GitKraken/CBE_selection/results_decision.RData")
load("C:/Users/Marta/Dropbox/C5/Scripts/GitKraken/CBE_selection/results_decision_H0.RData")
summary(dataset$Test_Power_CE - dataset$Test_Power_ES)
dataset$diff=dataset$Test_Power_CE - dataset$Test_Power_ES
View(dataset)
summary(dataset[,dataset$Test_Power_ES>0]$diff)
summary(dataset[dataset$Test_Power_ES>0,]$diff)
