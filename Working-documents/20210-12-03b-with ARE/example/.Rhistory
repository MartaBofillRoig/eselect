87+132+174
87+132+126
215-87+132
44+132+13
28+126+44
215-87+132
215-(87+132)
(87+132)
44+132+13
215-(87+132+28)
44+132+13
169-(44+132+13)
28+126+44
(87+132+28)
36+142+20
p0_e12 =
164-(36+142+20)
p0_e12
34-15
p0_ce =  p0_e1+p0_e2+p0_e3-p0_e12-p0_e23
p0_ce
p0_e1 = 0.037 #death
p0_e2 = 0.147 #mi
p0_e3 = 0.021 #stent
# probabilities e1 and e2; and e2 and e3; prob(e1 and e3) is assumed equal 0
p0_e12 = 15/969
p0_e23 = 19/969
# 164-(36+142+20)
p0_ce =  p0_e1+p0_e2+p0_e3-p0_e12-p0_e23
p0_ce
eselect(db,p0_e1,OR1=07,p0_e2,OR2=0.8,criteria="SS",alpha=0.05,beta=0.2)
1/exp(2)
1/exp(3)
K_init=2;K_max=5;n_arm=50
set.seed(2345)
K_new = sample(1:K_max,1) # number of added arms during the trial
K_total = K_new+K_init # total number experimental arms
T_arms = c(rep(0,K_init),runif(K_new)) # simulate starting times for the arms
T_arms = round(10*(T_arms[order(T_arms)])) #initial calendar (in weeks/months/...) starts at 0 and goes until 10
K_new
K_total
T_arms
T_arms
A_arms
A_arms = c(rep(1,K_init),rep(0,K_new)) # define vector active arms
N_rem = rep(n_arm,K_total) # remaining patients per arm
N_max = 2*n_arm*K_total  # max total sample size (worse case)
entry_times = runif(N_max) # entry times patients
A_arms
N_rem
N_max
entry_times
t=0 # init calendar time
alloc_time = list() # define allocation ratio over time
alloc_time[[t+1]] = list(time=t,active_arms=c(1,A_arms)) # allocation ratio at time 0
alloc_time
K_init
A_arms
alloc_time = matrix(c(t,A_arms),ncol=K_total+1)
alloc_time
data.frame(y,
trt,
time)
data.frame(y=NULL,
trt=NULL,
time=NULL)
data_gen = data.frame(y=NULL,
trt=NULL,
time=NULL)
ind_data = data.frame(y=NULL,
trt=NULL,
time=NULL)
ind_data
View(ind_data)
ind_data = data.frame(y=c(),
trt=c(),
time=c())
ind_data
View(ind_data)
ind_data[,1] = c(1,2,3)
ind_data[1,] = c(1,2,3)
ind_data = data.frame(y=c(0),
trt=c(0),
time=c(0))
ind_data
ind_data[,1] = c(1,2,3)
ind_data[1,] = c(1,2,3)
ind_data
alloc_time
alloc_time = list() # define allocation ratio over time
alloc_time[[t+1]] = list(time=t,active_arms=c(1,A_arms)) # allocation ratio at time 0
alloc_time
alloc_time[[2]]$active_arms
which(alloc_time[[t]]$active_arms>0)
which(alloc_time[[1]]$active_arms>0)
which(alloc_time[[1]]$active_arms>0)-1
sample(which(alloc_time[[1]]$active_arms>0)-1,10, replace = T)
sample(which(alloc_time[[1]]$active_arms>0)-1,10, replace = T)
pr=(alloc_time[[1]]$active_arms)/sum(alloc_time[[1]]$active_arms)
all_patient= sample(0:K_total, 10, replace = T, pr)
all_patient
pr
all_patient
which((alloc_time[[1]]$active_arms)==1)
